# Restful-booker-booking

**Booking**は、データベースから予約データを作成、読み取り、更新、削除し、他のサービスと共有する役割を担っています。

## チェックの実行

チェックのみを実行するには、以下のコマンドを実行してください：

```bash
mvn clean test
```

## APIのビルド

このAPIをビルドするには、以下のコマンドを実行してください。これによりテストが実行され、その後実行可能な`.JAR`ファイルが作成されます：

```bash
mvn clean package
```

## APIの実行

**Booking API**は、以下の環境変数を受け取ります：

- `dbRefresh` - 数値（例: 10）を設定すると、APIが10分ごとにデータベースをリセットします。空白のままにするか、0を設定するとデータベースはリセットされません。
- `dbServer` - この変数を`true`に設定すると、データベースが「サーバーモード」で有効になり、SquirrelSQLなどのツールを使用して外部からデータベースに接続できるようになります。

APIを実行するには、まずビルドを行い、次に以下のコマンドを実行してください：

```bash
java -jar target/restful-booker-platform-booking-1.0-SNAPSHOT.jar
```

これによりAPIが起動し、エンドポイントにアクセスできるようになります。

## ドキュメント

このAPIのエンドポイントドキュメントにアクセスするには、以下のURLに移動してください：

```
http://localhost:3000/booking/swagger-ui/index.html
```

また、アプリケーションのヘルス状態を確認するには、以下のURLにアクセスします：

```
http://localhost:3000/booking/actuator/health
```

最後に、APIのログファイルにアクセスするには、以下のURLに移動してください：

```
http://localhost:3000/booking/actuator/logfile
```

---

**補足情報:**

- **Bookingモジュールの役割**:
  - 他のサービスが適切な権限で予約データを操作できるように、データベースとのインタラクションを管理します。
  - 予約データのライフサイクル管理（作成、読み取り、更新、削除）を担当します。

- **ビルドプロセス**:
  - `mvn clean package` コマンドは、プロジェクトのクリーンアップとパッケージングを行います。テストが成功した後、実行可能なJARファイルが生成されます。

- **実行手順**:
  - ビルドが完了したら、生成されたJARファイルを実行してAPIを起動します。これにより、他のサービスからの予約データ操作リクエストに対応できるようになります。

- **ドキュメントアクセス**:
  - **Swagger UI**を使用して、APIのエンドポイントや使用方法を視覚的に確認できます。
  - **Actuatorエンドポイント**を使用して、アプリケーションのヘルス状態やログファイルにアクセスできます。

- **環境変数の設定**:
  - 必要に応じて、環境変数（例：データベース接続情報やセキュリティ設定）を適切に設定してください。

---

**トラブルシューティング:**

- **ビルドエラーが発生する場合**:
  - 必要な依存関係が正しくインストールされているか確認してください。
  - `JAVA_HOME`や`MAVEN_HOME`などの環境変数が正しく設定されているか確認してください。

- **APIにアクセスできない場合**:
  - サーバーが正しく起動しているか確認してください。
  - ファイアウォール設定やポートの競合を確認してください。
  - 指定されたポート（デフォルトは3000）が他のアプリケーションによって使用されていないか確認してください。

- **テストが失敗する場合**:
  - テスト環境が正しく構築されているか確認してください。
  - 必要な環境変数や設定ファイルが正しく設定されているか確認してください。

---

**まとめ:**

1. **チェックの実行**:
   - `mvn clean test` コマンドを使用して、単体テストや統合テストを実行します。

2. **APIのビルド**:
   - `mvn clean package` コマンドでAPIをビルドし、実行可能なJARファイルを作成します。

3. **APIの実行**:
   - ビルドが完了した後、生成されたJARファイルを実行してAPIを起動します。

4. **ドキュメントのアクセス**:
   - Swagger UIやActuatorエンドポイントを使用して、APIのドキュメントやアプリケーションの状態を確認します。

5. **トラブルシューティング**:
   - ビルドや実行時に問題が発生した場合は、ログファイルやエラーメッセージを確認し、必要な対策を行います。
